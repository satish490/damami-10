!function(g,f,a,n,m){"use strict";var c="slick-lightbox",l=c,i=c+"-gallery",u=i+"--on",s="[data-"+i+"]:not(."+u+")",k="[data-"+c+"-trigger]",p=c+"-slick",v="."+p,b="slbox",x="is-playing",y="is-paused",C=".media__icon--close",L=f.blazy||{},w=n.sanitizer;function e(i){var o,h=g("> .slick__slider",i),r=h.length?h:g(i),d=a.slickLightbox.lightbox||{},l=a.slickLightbox.slick||{},s=g(k=d.itemSelector||k,i);var e={closeOnBackdropClick:!1,itemSelector:k,caption:function(i,e){i=g(i).next();return i.length&&i.hasClass("visually-hidden")?w.sanitize(i[0].innerHTML):""},src:function(i){i=g(i);return i.data("boxUrl")||i.attr("href")},slick:function(i){var e,t=g(v,i),r=t.children();function a(i,e){var t,a,n,l=g(e),s=g(r[i]),c=g(".media--player",s),o=l.data("bMedia")||l.data("media")||{};if(g("img",s).attr("loading","lazy"),o)if(s.addClass("slick-slide--"+o.type),"html"in o){try{t=o.html,o.encoded&&(t=atob(t)),t=w.sanitize(t),a=f.theme("slickLightbox",{html:t,media:o}),s.find(v+"-img").replaceWith(a),(n=s.find("img")).length&&(n.addClass(p+"-img"),s.find(v+"-caption").length&&m.setTimeout(function(){n.each(function(){this.complete?d.call(this):g(this).one("load",d)})},10))}catch(i){}i=g(".media",s);i.length&&f.attachBehaviors(i[0])}else l.data("boxUrl")&&!c.length&&(a=f.theme("blazyMedia",{el:e}),(n=g(v+"-img",s)).replaceWith(g(a)),m.setTimeout(function(){(c=s.find(".media--player")).length&&f.attachBehaviors(c[0])}))}function n(){var i=t.find("."+x),e=t.find("video");t.removeClass(y),i.length&&i.removeClass(x).find(C).click(),e.length&&e[0].pause()}function d(){var i=g(this),e=i.width(),t=i.closest(".media-wrapper--box"),a=t.next(v+"-caption"),n=t.parent().height();a.length&&(n-=a.height()+parseInt(a.css("margin-top").replace("px",""),0)),i.css("max-height",n),t.css({width:e})}return t.hasClass("slick-initialized")||t.on("init",function(){var i;i=s,(s=h.length?i.filter(function(){var i=g(this);return!i.hasClass("slick-cloned")&&0===i.parents(".slick-cloned").length}):i).each(a)}),e=t.slick(l),t.on("beforeChange."+b,function(){L.load&&L.load(t[0])}),t.on("afterChange."+b,n),t.on("click."+b,C,n),t.on("click."+b,".media__icon--play",function(){t.addClass(y).slick("slickPause")}),1===r.length&&(i=t.slick("getSlick"),t.addClass(p+"--unslick"),i.$slideTrack.css({left:"",transform:""})),e}},t={"show.slickLightbox":function(){g(".slick-slide--video ."+p+"-item-inner").removeAttr("style"),g(r[0].slickLightbox.$modalElement).on("click."+b,v+"-item",function(i){i.target===this&&g("."+c+"-close").click()})}},e=d?g.extend({},e,d):e;r.slickLightbox(e).on(t);t="click.slboxlink";r.off(t).on(t,k,function(i){var i=i.currentTarget,e=g(i),t=parseInt(e.attr("data-b-delta"),0),a=d.itemContainers;if(a&&0===t&&!h.length)for(var n=a.length,l=0;l<n;l++){var s=e.closest(a[l]);if(s.length){var c=s.find(k);if(e[0]===c[0]){t=s.index();break}}}setTimeout(function(){(o=r[0].slickLightbox)&&o.slick&&o.slick.slick("slickGoTo",t||0,!0)})}),g(i).addClass(u)}f.theme.slickLightbox=function(i){var e='<div class="media-wrapper media-wrapper--box media-wrapper--inline" style="width:'+i.media.width+'px">';return e+=i.html,e+="</div>"},f.behaviors.slickLightbox={attach:function(i){n.once(e,l,s,i)},detach:function(i,e,t){"unload"===t&&n.once.removeSafely(l,s,i)}}}(jQuery,Drupal,drupalSettings,dBlazy,this);
